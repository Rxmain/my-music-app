const artistTitle="Daft punk",result=document.querySelector(".result-section"),resultNumber=document.querySelector(".result-section_counter"),userInput=document.querySelector(".user-search").value;let resultSection=document.querySelector(".result-section"),mainResult=document.querySelector(".result-section_single"),idResult=document.querySelector(".id-single"),artistContent=document.querySelector(".artist-name"),titleContent=document.querySelector(".artist-single"),showMore=document.querySelector(".show-more-btn"),offset=0;function getIdArtist(t,n){const r=new XMLHttpRequest;r.open("GET",'http://musicbrainz.org/ws/2/artist/?query=artist:"'+artistTitle+'"'),r.setRequestHeader("Accept","application/json"),r.addEventListener("readystatechange",function(){var e;r.readyState===XMLHttpRequest.DONE&&(200===r.status?(e=JSON.parse(r.responseText),t(e)):n())}),r.send()}function searchArtistSingle(t,n){const r=new XMLHttpRequest;r.open("GET","https://musicbrainz.org/ws/2/recording?fmt=json&limit=10&offset="+offset+"&artist=056e4f3e-d505-4dad-8ec1-d04f521cbb56"),r.addEventListener("readystatechange",function(){var e;r.readyState===XMLHttpRequest.DONE&&(200===r.status?(e=JSON.parse(r.responseText),t(e)):n())}),r.send()}getIdArtist(function(e){console.log(e)}),showMore.addEventListener("click",function(e){e.preventDefault(),setTimeout(function(){offset+=10,startSearch()},5e3)}),console.log(offset);let childCopy,number=0,idSingle="";function startSearch(){searchArtistSingle(function(n){for(let e=0;e<n.recordings.length;e++){number++;let t=mainResult.cloneNode(!0);t.children[0].textContent=number,t.children[1].textContent=artistTitle,t.children[2].textContent=n.recordings[e].title,resultSection.appendChild(t),idSingle=n.recordings[e].id,searchArtistAlbum(function(e){void 0!==e.releases[0]?t.children[3].textContent=e.releases[0].title:t.children[3].textContent="Album inconnu"})}})}function searchArtistAlbum(t,n){const r=new XMLHttpRequest;r.open("GET","https://musicbrainz.org/ws/2/release?fmt=json&limit=10&offset=0&recording="+idSingle),r.addEventListener("readystatechange",function(){var e;r.readyState===XMLHttpRequest.DONE&&(200===r.status?(e=JSON.parse(r.responseText),t(e)):n())}),r.send()}startSearch();const selectBoxArtist=document.querySelector("select").value="artist",selectBoxTitle=document.querySelector("select").value="title",selectBoxAlbum=document.querySelector("select").value="album",nameInput=document.querySelector(".user-search");function enterSubmit(){document.querySelector("form").addEventListener("keypress",function(e){13==e.key&&e.preventDefault()})}document.querySelector("form").addEventListener("submit",function(e){e.preventDefault(),nameInput.value=songTitle});